데이터를 관리하고자 할 때 선택할 수 있는 DBMS는 굉장히 많다

개발하고자 하는 프로젝트의 요구 사항을 분석하여 어떤 DBMS가 가장 적합한지 결정하는 것은 매우 중요하다

특정 상황에서는 왜 RDBMS 대신 NoSQL을 사용해야 할까?

이 질문에 대한 답을 하기 위해 NoSQL과 RDBMS는 각각 어떠한 장단점이 있는지 알아보고, NoSQL은 언제 사용하면 좋을지 알아보자

# **NoSQL 특징**

- **확장성**
- **비용**
- **유연성**
- **가용성**

## 확장성

: **변화무쌍**한 작업 부하에 대한 **요구 사항을 효율적으로 충족시키는 능력**

필요에 따라 서버를 추가하는 scale-out 작업이 이루어진다  
**RDBMS**에서는 단일 데이터베이스 시스템을 구동하는 여러 서버를 관리하기위해 데이터베이스 소프트웨어가 필요하여 복잡성과 운영 비용이 증가할 수 있다  
**NoSQL**은 **클러스터 하나에서 서버 여러개를 이용하도록 설계되었다.** 즉, 새로운 서버를 추가/제거할 때 NoSQL DBMS는 사용 가능한 새 서버를 사용하도록 조정한다.

## 비용

주요 **NoSQL** 데이터베이스들은 **오픈 소스** 형태로 제공되며 대부분 오픈 소스 개발자는 자신의 소프트웨어를 사용하는데 비용을 매기지 않는다.

## 유연성

**RDBMS**는 관계형 데이터 모델을 사용해 해결 가능한 문제의 범위 "내에서는" 유연한 편이다. 하지만 데이터베이스 설계자는 프로젝트를 시작할 때 애플리케이션 지원에 필요한 **모든 테이블과 컬럼을 파악**해야 할 뿐만 아니라 대부분의 테이블에 값이 채워져있어야 한다.

**NoSQL** 데이터베이스는 고정된 테이블 구조가 필요하지 않다. 즉, 데이터베이스 설계를 변경하지 않고도 필요한 새로운 속성을 **동적으로 추가**할 수 있다.

## 가용성

**NoSQL** 데이터베이스는 저렴한 비용으로 서버를 여러개 이용할 수 있도록 설계되었다

서버 하나가 중지되거나 서비스를 일시 중지해야할 경우 클러스터 내 다른 서버가 작업량 전체를 떠맡을 수 있다

# NoSQL vs. RDBMS

**NoSQL 장점**

- 스키마가 없어서 유연함. 언제든지 저장된 데이터를 조정하고 새로운 필드 추가 가능
- 데이터는 애플리케이션이 필요로 하는 형식으로 저장됨. 데이터 읽어오는 속도 빨라짐
- 수직 및 수평 확장이 가능해서 애플리케이션이 발생시키는 모든 읽기/쓰기 요청 처리 가능

**NoSQL 단점**

- 유연성으로 인해 데이터 구조 결정을 미루게 될 수 있음
- 데이터 중복을 계속 업데이트 해야 함
- 데이터가 여러 컬렉션에 중복되어 있기 때문에 수정 시 모든 컬렉션에서 수행해야 함 (SQL에서는 중복 데이터가 없으므로 한번만 수행이 가능)

**RDBMS 장점**

- 하나의 테이블에서 중복 없이 하나의 데이터만을 관리하기 때문에 다른 테이블에서 부정확한 데이터를 다룰 위험이 없어지는 장
- 명확하게 정의된 스키마, 데이터 무결성 보장
- 관계는 각 데이터를 중복없이 한번만 저장

**RDBMS 단점**

- 덜 유연함. 데이터 스키마를 사전에 계획하고 알려야 함. (나중에 수정하기 힘듬)
- 관계를 맺고 있어서 조인문이 많은 복잡한 쿼리가 만들어질 수 있음
- 대체로 수직적 확장만 가능함

# 어떤 DBMS를 선택할까

**RDBMS**

- 데이터 구조가 명확하며 변경 될 여지가 없으며 명확한 스키마가 중요한 경우
- 중복된 데이터가 없어(데이터 무결성) 변경이 용이하기 때문에 관계를 맺고 있는 데이터가 자주 변경이 이루어지는 시스템
- 관계를 맺고 있는 데이터가 자주 변경되는 애플리케이션의 경우
- 변경될 여지가 없고, 명확한 스키마가 사용자와 데이터에게 중요한 경우

**NoSQL**

- 정확한 데이터 구조를 알 수 없고 데이터가 변경/확장이 될 수 있는 경우
- Update가 많이 이루어지지 않는 시스템
- 막대한 데이터를 저장해야 해서 Database를 Scale-Out를 해야 되는 시스템
- 조인을 잘 사용하지 않고 자주 변경되지 않는 데이터
- 정확한 데이터 구조를 알 수 없거나 변경/확장 될 수 있는 경우
- 읽기를 자주 하지만, 데이터 변경은 자주 없는 경우
- 데이터베이스를 수평으로 확장해야 하는 경우 (막대한 양의 데이터를 다뤄야 하는 경우)

## 예시

### 1. 영화 추천 서비스 개발

> 영화 시상식에서 노미네이트 된 영화를 기반으로 **영화 추천 서비스**를 만들고 있으며 API를 통해 TMDB ID, 제목, 년도, 포스터와 같은 기본적인 영화 정보를 검색해야 하기 때문에 해당 정보를 저장할 **영화 DB가 필요**합니다. 또한 카테고리, 노미네이트, 수상작들과 같은 정보가 담긴 **시상 DB**가 필요할 것 같습니다. 지금까지는 간단하게 SQLite를 사용하고 있었으나 본 영화 목록, 보고 싶은 목록들의 기능을 넣어서 버전 2.0 개발할 예정인데 **과연 NoSQL이 적합할지 궁금**합니다!
> 

위와 같은 서비스를 개발하고자 한다면 SQLite와 NoSQL DBMS 중 어떤 것을 선택해야할까?

> 만약 서비스 구성하는데 **비관계형 데이터베이스를 써야 하는 이유를 정확하게 알지 못하면 관계형 데이터베이스를 사용하는 것을 일단 추천**합니다. 그리고 기존에 하나인 데이터베이스에서 **영화 데이터와 시상 데이터를 찢어서 사용한다는 것은 이미 두 테이블 간 관계가 있는 것**으로 보입니다. 만약에 관계형 데이터 형태인데 무리하게 NoSQL를 사용하려고 하면 분명히 나중에 후회를 할 것입니다.
> 

> 만약에 특정 데이터, 예를 들어 보고 싶은 목록 리스트를 **문서 형태로 만든다면 PostgreSQL의 JSON형태로 저장하는 기능 활용하여 관계형과 비 관계형을 함께 효율적으로 사용**할 수 있을 것 같네요.
> 

결론적으로, 굳이 NoSQL을 사용해야할 이유가 명확하지 않다면, 관계형 데이터베이스를 사용하는 것이 더 안전하다. 특히, 데이터 간 관계가 확실한 경우에는 오히려 더 비효율적인 결과를 일으킬 수도 있다

개발하고자 하는 서비스의 데이터 모델을 선택할 때 답해보아야하는 질문은 아래와 같이 정리해볼 수 있다

1. **어떤 데이터를 다루는가?**  
서비스에서 주로 사용하는 데이터의 구조, 관계, 그리고 사용 방법에 대해서 정확하게 정의해야한다
2. **주요 서비스가 무엇인가?**  
같은 도메인 내에서도 어떤 서비스를 제공하는 지에 따라 DB 관리 방향이 완전히 달라질 수 있다  
주요 기능을 정리하고, 해당 기능을 구조적으로 가장 잘 지원하는 모델을 선택해야 한다

### 2. ClickHouse

[Clickhouse](https://www.notion.so/Clickhouse-295b874f7f6043edbd77e180e185b318)

# 비고

## 결론

### NoSQL은 어떠한 상황에서 사용되어야할까

## 출처

- [https://velog.io/@hanblueblue/NoSQL과-역사](https://velog.io/@hanblueblue/NoSQL%EA%B3%BC-%EC%97%AD%EC%82%AC)
- [https://khj93.tistory.com/entry/Database-RDBMS와-NOSQL-차이점](https://khj93.tistory.com/entry/Database-RDBMS%EC%99%80-NOSQL-%EC%B0%A8%EC%9D%B4%EC%A0%90)
- [https://mustread.tistory.com/5](https://mustread.tistory.com/5)
- [https://dev.to/danroc/should-i-go-nosql-or-sql-for-my-specific-app-case-or-both-38ca](https://dev.to/danroc/should-i-go-nosql-or-sql-for-my-specific-app-case-or-both-38ca)
